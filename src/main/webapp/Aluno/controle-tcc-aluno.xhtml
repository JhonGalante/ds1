<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:decorate xmlns="http://www.w3.org/1999/xhtml"
             xmlns:h="http://xmlns.jcp.org/jsf/html"
             xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
             template="template-menu.xhtml"
             xmlns:p="http://primefaces.org/ui"
             xmlns:f="http://xmlns.jcp.org/jsf/core">

  

    <script type="text/javascript">
        //<![CDATA[
        function start() {
            PF('statusDialog').show();
        }

        function stop() {
            PF('statusDialog').hide();
        }
        //]]>
    </script>
    
    <div class="container">
        <p:panel style="text-align:left" header="Controle de TCC">
        <br></br>
            <p:growl showDetail="true"/>
            <h:form enctype="multipart/form-data">
                <br/><br/>
                <p:fileUpload value="#{guiControleTCCIAluno.file}" mode="simple"/>
                <h4>Comentários</h4>
                <p:inputTextarea value="#{guiControleTCCIAluno.comentario}" rows="4" cols="30" counter="display" maxlength="5000" counterTemplate="{0} caracteres restantes." autoResize="false" />
                <br/>
                <h:outputText id="display" />           

                <br/><br/>
                <p:commandButton value="Enviar" ajax="false" actionListener="#{guiControleTCCIAluno.uploadTCC()}"/>
            </h:form>


        </p:panel>
    </div>  
    
    <div class="container">
        <p:commandButton value="Histórico" ajax="true" action="#{controleTccAluno.retornaMovimentacoesAluno()}" update="movimentacoes"/>
        <p:panel id="movimentacoes">
            <h:form>
                <h3>DataModel</h3>
                <p:tabView value="#{controleTccAluno.movimentacoesAluno}" var="movimentacao">
                    <p:tab title="Data - #{movimentacao.data}">
                        <h:panelGrid columns="2" cellpadding="5">
                            <f:facet name="header">
                                <p:commandButton value="Download" ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);" icon="pi pi-arrow-down" action="#{controleTccAluno.download(movimentacao)}">
                                    <p:fileDownload value="#{controleTccAluno.file}" />
                                </p:commandButton> 
                            </f:facet>                    
                            <h:outputText value="Comentário do aluno" style="font-weight: bold"/>
                            <h:outputText value="#{movimentacao.comentarioAluno}" />

                            <h:outputText value="Comentario do professor TCC" style="font-weight: bold"/>
                            <h:outputText value="#{movimentacao.comentarioProfessor}" />

                            <h:outputText value="Comentario do Orientador" style="font-weight: bold"/>
                            <h:outputText value="#{movimentacao.comentarioOrientador}" />
                        </h:panelGrid>
                    </p:tab>
                </p:tabView>
            </h:form>
        </p:panel>
    </div>
    
</ui:decorate>
